<Window x:Class="Damareen.NewWorld"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Damareen"
        mc:Ignorable="d"
        Title="Világépítő" Height="720" Width="1280"
        WindowState="Maximized" 
        WindowStyle="None" 
        Background="#050505"
        Loaded="Window_Loaded">

    <Window.Resources>
        <Style TargetType="ComboBox">
            <Setter Property="Background" Value="#0a0a0a"/>
            <Setter Property="Foreground" Value="#DDDDDD"/>
            <Setter Property="BorderBrush" Value="#333333"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Grid>
                            <ToggleButton Name="ToggleButton" 
                                          Background="#0a0a0a"
                                          BorderBrush="#333333"
                                          BorderThickness="1"
                                          Focusable="false"
                                          IsChecked="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                          ClickMode="Press">
                                <ToggleButton.Style>
                                    <Style TargetType="ToggleButton">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ToggleButton">
                                                    <Border Name="Border" Background="{TemplateBinding Background}" 
                                                            BorderBrush="{TemplateBinding BorderBrush}" 
                                                            BorderThickness="{TemplateBinding BorderThickness}">
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition/>
                                                                <ColumnDefinition Width="20"/>
                                                            </Grid.ColumnDefinitions>
                                                            <Path Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" 
                                                                  Data="M 0 0 L 4 4 L 8 0 Z" Fill="#AAAAAA"/>
                                                        </Grid>
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="Border" Property="Background" Value="#1a1a1a"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </ToggleButton.Style>
                            </ToggleButton>
                            <ContentPresenter Name="ContentSite" IsHitTestVisible="False" 
                                              Content="{TemplateBinding SelectionBoxItem}"
                                              ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                              ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                              Margin="5,3,23,3"
                                              VerticalAlignment="Center"
                                              HorizontalAlignment="Left"/>
                            <Popup Name="Popup" Placement="Bottom" IsOpen="{TemplateBinding IsDropDownOpen}"
                                   AllowsTransparency="True" Focusable="False" PopupAnimation="Slide">
                                <Grid Name="DropDown" SnapsToDevicePixels="True" 
                                      MinWidth="{TemplateBinding ActualWidth}"
                                      MaxHeight="{TemplateBinding MaxDropDownHeight}">
                                    <Border Name="DropDownBorder" Background="#0a0a0a" 
                                            BorderThickness="1" BorderBrush="#333333"/>
                                    <ScrollViewer Margin="4,6,4,6" SnapsToDevicePixels="True">
                                        <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained"/>
                                    </ScrollViewer>
                                </Grid>
                            </Popup>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="ComboBoxItem">
            <Setter Property="Background" Value="#0a0a0a"/>
            <Setter Property="Foreground" Value="#DDDDDD"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBoxItem">
                        <Border Name="Border" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                            <ContentPresenter/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsHighlighted" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#1a1a1a"/>
                                <Setter Property="Foreground" Value="#C5A059"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#1a1a1a"/>
                                <Setter Property="Foreground" Value="#C5A059"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="TextBox">
            <Setter Property="Background" Value="#0a0a0a"/>
            <Setter Property="Foreground" Value="#DDDDDD"/>
            <Setter Property="BorderBrush" Value="#333333"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="FontSize" Value="14"/>
        </Style>

        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="#AAAAAA"/>
            <Setter Property="FontSize" Value="14"/>
        </Style>

        <Style TargetType="CheckBox">
            <Setter Property="Foreground" Value="#DDDDDD"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <Grid Background="Transparent">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Border Name="CheckBorder" 
                                    Width="18" Height="18" 
                                    BorderBrush="#555555" 
                                    BorderThickness="2" 
                                    CornerRadius="3"
                                    Background="#0a0a0a"
                                    Margin="0,0,8,0">
                                <Path Name="CheckMark"
                                      Data="M 2 8 L 6 12 L 14 2"
                                      Stroke="#C5A059"
                                      StrokeThickness="2"
                                      Visibility="Collapsed"
                                      StrokeStartLineCap="Round"
                                      StrokeEndLineCap="Round"/>
                            </Border>

                            <ContentPresenter Grid.Column="1" 
                                              VerticalAlignment="Center"
                                              Content="{TemplateBinding Content}"/>
                        </Grid>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="CheckMark" Property="Visibility" Value="Visible"/>
                                <Setter TargetName="CheckBorder" Property="BorderBrush" Value="#C5A059"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="CheckBorder" Property="BorderBrush" Value="#888888"/>
                                <Setter Property="Foreground" Value="#FFFFFF"/>
                            </Trigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsMouseOver" Value="True"/>
                                    <Condition Property="IsChecked" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter TargetName="CheckBorder" Property="BorderBrush" Value="#D4B070"/>
                            </MultiTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="RadioButton">
            <Setter Property="Foreground" Value="#DDDDDD"/>
            <Setter Property="Margin" Value="0,5"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Grid Background="Transparent">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Border Name="RadioBorder" 
                                    Width="18" Height="18" 
                                    BorderBrush="#555555" 
                                    BorderThickness="2" 
                                    CornerRadius="9"
                                    Background="#0a0a0a"
                                    Margin="0,0,8,0">
                                <Ellipse Name="RadioDot" 
                                         Width="8" Height="8" 
                                         Fill="#C5A059"
                                         Visibility="Collapsed"/>
                            </Border>

                            <ContentPresenter Grid.Column="1" 
                                              VerticalAlignment="Center"
                                              Content="{TemplateBinding Content}"/>
                        </Grid>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="RadioDot" Property="Visibility" Value="Visible"/>
                                <Setter TargetName="RadioBorder" Property="BorderBrush" Value="#C5A059"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="RadioBorder" Property="BorderBrush" Value="#888888"/>
                                <Setter Property="Foreground" Value="#FFFFFF"/>
                            </Trigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsMouseOver" Value="True"/>
                                    <Condition Property="IsChecked" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter TargetName="RadioBorder" Property="BorderBrush" Value="#D4B070"/>
                            </MultiTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Background="#050505">

        <Grid.RowDefinitions>
            <RowDefinition Height="80"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#080808" BorderBrush="#333" BorderThickness="0,0,0,1">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                <Button Content="MENTÉS ÉS KILÉPÉS" Click="SaveWorld_Click" FontSize="30" Margin="20,0" Foreground="#8a0303"/>
                <Button x:Name="BtnShowCards" Content="KARAKTEREK" Click="SwitchToCards" FontSize="30" Margin="20,0" Foreground="#C5A059"/>
                <Button x:Name="BtnShowDungeons" Content="KAZAMATÁK" Click="SwitchToDungeons" FontSize="30" Margin="20,0"/>
                <Button Content="VISSZA A MENÜBE" Click="BackToMenu" FontSize="30" Margin="50,0,0,0" Foreground="#666"/>
            </StackPanel>
        </Border>

        <Grid x:Name="CardCreationPanel" Grid.Row="1" Margin="10" Visibility="Visible">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="350"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" Background="#0a0a0a" BorderBrush="#333" BorderThickness="1" CornerRadius="5" Padding="20" VerticalAlignment="Top">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <TextBlock Text="KÁRTYA SZERKESZTŐ" FontSize="28" Foreground="#8a0303" HorizontalAlignment="Center" Margin="0,0,0,30"/>

                        <TextBlock Text="NÉV"/>
                        <TextBox x:Name="InputName" Margin="0,5,0,15"/>

                        <TextBlock Text="ELEMI TÍPUS"/>
                        <ComboBox x:Name="TypeCombo" Margin="0,5,0,15" Background="#0a0a0a">
                            <ComboBoxItem IsSelected="True">Tűz</ComboBoxItem>
                            <ComboBoxItem>Víz</ComboBoxItem>
                            <ComboBoxItem>Föld</ComboBoxItem>
                            <ComboBoxItem>Levegő</ComboBoxItem>
                        </ComboBox>

                        <Grid Margin="0,5,0,15">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="10"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="SEBZÉS (DMG)"/>
                                <TextBox x:Name="InputDmg"/>
                            </StackPanel>
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="ÉLETERŐ (HP)"/>
                                <TextBox x:Name="InputHp"/>
                            </StackPanel>
                        </Grid>

                        <Button x:Name="CreateBtn" Content="LÉTREHOZÁS" Click="CreateOrUpdateCard" FontSize="30" Foreground="#C5A059" BorderBrush="#C5A059" BorderThickness="1" Height="50" Margin="0,25,0,10"/>

                        <Separator Background="#333" Margin="0,30,0,30"/>

                        <TextBlock Text="VEZÉR LÉTREHOZÁSA" FontSize="28" Foreground="#8a0303" HorizontalAlignment="Center" Margin="0,0,0,30"/>

                        <TextBlock Text="ÚJ VEZÉR NÉV"/>
                        <TextBox x:Name="InputLeaderName" Margin="0,5,0,15"/>

                        <TextBlock Text="ALAP KÁRTYA (SIMA)"/>
                        <ComboBox x:Name="ComboBaseCard" Margin="0,5,0,15"/>

                        <TextBlock Text="BÓNUSZ TÍPUS"/>
                        <StackPanel Margin="0,5,0,15" Orientation="Horizontal">
                            <RadioButton x:Name="RadioLeaderBonusHp" Content="Életerő (2 X HP)" IsChecked="True" Margin="0,5,5,5"/>
                            <RadioButton x:Name="RadioLeaderBonusDmg" Content="Sebzés (2 X DMG)"/>
                        </StackPanel>

                        <Button x:Name="CreateLeaderBtn" Content="VEZÉR LÉTREHOZÁSA" Click="CreateLeader_Click" FontSize="30" Foreground="#C5A059" BorderBrush="#C5A059" BorderThickness="1" Height="50" Margin="0,15,0,10"/>

                    </StackPanel>
                </ScrollViewer>
            </Border>


            <Grid Grid.Column="1" Margin="10,0,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="10,0,0,10">
                    <TextBlock Text="LÉTREHOZOTT KÁRTYÁK" FontSize="24" VerticalAlignment="Center" Margin="0,0,20,0"/>
                    <CheckBox x:Name="FilterLeader" Content="Vezér" IsChecked="True" Checked="FilterChanged" Unchecked="FilterChanged" Foreground="#C5A059" FontSize="16" VerticalAlignment="Center" Margin="10,0"/>
                    <CheckBox x:Name="FilterNormal" Content="Sima" IsChecked="True" Checked="FilterChanged" Unchecked="FilterChanged" Foreground="#ddd" FontSize="16" VerticalAlignment="Center" Margin="10,0"/>
                </StackPanel>

                <Border Grid.Row="1" Background="#080808" BorderBrush="#222" BorderThickness="1">
                    <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
                        <WrapPanel x:Name="CardsPanel" Margin="10" HorizontalAlignment="Left"/>
                    </ScrollViewer>
                </Border>
            </Grid>
        </Grid>

        <Grid x:Name="DungeonCreationPanel" Grid.Row="1" Margin="10" Visibility="Collapsed">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="350"/>
                <ColumnDefinition Width="350"/>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" Background="#0a0a0a" BorderBrush="#333" BorderThickness="1" CornerRadius="5" Padding="20" VerticalAlignment="Top">
                <StackPanel>
                    <TextBlock Text="KAZAMATA SZERKESZTŐ" FontSize="24" Foreground="#8a0303" HorizontalAlignment="Center" Margin="0,0,0,30" TextWrapping="Wrap" TextAlignment="Center"/>

                    <TextBlock Text="NÉV"/>
                    <TextBox x:Name="InputDungeonName" Margin="0,5,0,15"/>

                    <TextBlock Text="TÍPUS"/>
                    <ComboBox x:Name="DungeonTypeCombo" Margin="0,5,0,15" SelectionChanged="DungeonType_Changed">
                        <ComboBoxItem IsSelected="True">Egyszeru</ComboBoxItem>
                        <ComboBoxItem>Kis</ComboBoxItem>
                        <ComboBoxItem>Nagy</ComboBoxItem>
                    </ComboBox>

                    <TextBlock Text="JUTALOM TÍPUSA" Margin="0,10,0,5"/>
                    <StackPanel Margin="0,0,0,15">
                        <RadioButton x:Name="RadioBonusHp" Content="Életerő (HP)" Checked="BonusType_Changed"/>
                        <RadioButton x:Name="RadioBonusDmg" Content="Sebzés (DMG)" Checked="BonusType_Changed"/>
                        <RadioButton x:Name="RadioBonusCard" Content="Új Kártya" IsChecked="True" Checked="BonusType_Changed"/>
                    </StackPanel>

                    <StackPanel x:Name="BonusValuePanel" Visibility="Collapsed">
                        <TextBlock Text="BÓNUSZ ÉRTÉKE (PL: 5)"/>
                        <TextBox x:Name="InputBonusValue" Margin="0,5,0,15"/>
                    </StackPanel>

                    <StackPanel x:Name="BonusCardPanel" Visibility="Visible">
                        <TextBlock Text="BÓNUSZ KÁRTYA"/>
                        <ComboBox x:Name="ComboBonusCard" Margin="0,5,0,15"/>
                    </StackPanel>

                    <Button x:Name="CreateDungeonBtn" Content="LÉTREHOZÁS" Click="CreateOrUpdateDungeon" FontSize="30" Foreground="#C5A059" BorderBrush="#C5A059" BorderThickness="1" Height="50" Margin="0,0,0,10"/>
                </StackPanel>
            </Border>

            <Border Grid.Column="1" Background="#080808" BorderBrush="#222" BorderThickness="1" Margin="10,0,0,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <TextBlock Grid.Row="0" Text="KAZAMATÁK" FontSize="24" VerticalAlignment="Center" Margin="10"/>
                    <ScrollViewer Grid.Row="1" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
                        <StackPanel x:Name="DungeonsPanel" Margin="5"/>
                    </ScrollViewer>
                </Grid>
            </Border>

            <Border Grid.Column="2" Background="#080808" BorderBrush="#222" BorderThickness="1" Margin="10,0,0,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="10" VerticalAlignment="Center">
                        <TextBlock Grid.Row="0" Text="ELÉRHETŐ KÁRTYÁK" FontSize="24" VerticalAlignment="Center" />
                        <TextBlock x:Name="AvailableContentCountText" Text="(0)" FontSize="18" Foreground="#888" Margin="10,0,0,0" VerticalAlignment="Bottom"/>
                    </StackPanel>
                    <ScrollViewer Grid.Row="1" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
                        <WrapPanel x:Name="AvailableCardsPanel" Margin="10" HorizontalAlignment="Left"/>
                    </ScrollViewer>
                </Grid>
            </Border>

            <Border Grid.Column="3" Background="#050505" BorderBrush="#333" BorderThickness="1" Margin="10,0,0,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="10" VerticalAlignment="Center">
                        <TextBlock Text="KAZAMATA TARTALMA" FontSize="24" VerticalAlignment="Center" Foreground="#C5A059"/>
                        <TextBlock x:Name="DungeonContentCountText" Text="(Sima: 0/0, Vezér: 0/0)" FontSize="18" Foreground="#888" Margin="10,0,0,0" VerticalAlignment="Bottom"/>
                    </StackPanel>
                    <ScrollViewer Grid.Row="1" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
                        <WrapPanel x:Name="DungeonCardsPanel" Margin="10" HorizontalAlignment="Left"/>
                    </ScrollViewer>
                </Grid>
            </Border>

        </Grid>
    </Grid>
</Window>